services:
  kms_app:
    image: ghcr.io/Alvinsmask/knowledge-system:latest
    container_name: kms_app
    restart: always
    env_file:
      - .env
    environment:
      - DATABASE_URL=${DATABASE_URL}
      - DEEPSEEK_API_KEY=${DEEPSEEK_API_KEY}
      - VITE_API_URL=/api
    ports:
      - "80:3000"
    # 镜像已包含 nginx.conf 和 start.sh，无需挂载代码目录
    # 若需覆盖配置，可在此挂载自定义文件
    # volumes:
    #   - ./nginx.conf:/etc/nginx/nginx.conf:ro
    #   - ./start.sh:/start.sh:ro
